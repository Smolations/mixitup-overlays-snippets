/*
  with a black/transparent gradient used as a mask, the alpha
  values are multipled with the underlying content. so black
  shows content completely, while transparent hides it.
*/
:root {
  --msk: repeating-linear-gradient(#000000 0px, #000000 3px, transparent 4px);
  --terminal-color: #ffffff;
  --terminal-bg-color: #000000;
  --terminal-highlight-color: var(--reentry-orange);

  --terminal-height: 300px;
  --terminal-width: 80%;
  --terminal-overlap: 15px;
  --terminal-closed-transform: translateY(calc(-1 * (var(--terminal-height) + var(--terminal-overlap))));
  --terminal-opened-transform: translateY(0);

  --text-glow-default: 0px 0px 8px #666666;
  /* --text-glow-highlight: 0px 0px 8px var(--reentry-orange); */
  --text-glow-highlight: 0px 0px 8px rgba(232, 99, 0, 0.8);
  --glow-white: drop-shadow(var(--text-glow-default));
  --glow-highlight: drop-shadow(var(--text-glow-highlight));
}

body {
  height: 100vh;
  position: relative;
}

pre {
  white-space: pre-wrap;
}

@keyframes terminal-drift {
  0% {
    -webkit-mask-position: 0 0;
    mask-position: 0 0;
  }
  100% {
    -webkit-mask-position: 0 var(--terminal-height);
    mask-position: 0 var(--terminal-height);
  }
}

@keyframes terminal-open {
  0% {
    transform: var(--terminal-closed-transform);
  }
  30% {
    transform: translateY(calc(-1 * (var(--terminal-height) / 2)));
  }
  100% {
    transform: var(--terminal-opened-transform);
  }
}

@keyframes terminal-close {
  0% {
    transform: var(--terminal-opened-transform);
  }
  30% {
    transform: translateY(calc(-1 * (var(--terminal-height) / 2)));
  }
  100% {
    transform: var(--terminal-closed-transform);
  }
}

.terminal-container {
  position: relative;
  left: calc((100% - var(--terminal-width)) / 2);
  top: calc(-1 * var(--terminal-overlap));

  height: var(--terminal-height);
  width: var(--terminal-width);
  padding-top: var(--terminal-overlap);

  background-color: var(--terminal-bg-color);
  box-shadow: 3px 3px 5px #000000;
  border: 8px solid var(--battletech-grey);
  border-bottom-left-radius: 5px;
  border-bottom-right-radius: 5px;
  border-top: none;
}

.terminal-opening {
  animation: 5s ease-in-out terminal-open;
}

.terminal-opened {
  transform: var(--terminal-opened-transform);
}

.terminal-closing {
  animation: 3s ease-in-out terminal-close;
}

.terminal-closed {
  transform: var(--terminal-closed-transform);
}


.terminal {
  box-sizing: border-box;
  position: absolute;
  bottom: 0;
  height: var(--terminal-height);
  width: 100%;
  padding: 0.2em 0;
  color: var(--terminal-color);
  font-weight: bold;
  font-size: 2em;

  -webkit-mask-image: var(--msk);
  mask-image: var(--msk);
  -webkit-mask-size: 200%;
  mask-size: 200%;
  animation: terminal-drift 8s infinite alternate cubic-bezier(0.1, -0.6, 0.2, 0);
}

.terminal-line {
  margin: 0;
  padding: 0 0.5em;
  line-height: 1.3;
}

/* .terminal-input { */
  /* filter: var(--glow-white) var(--glow-white) brightness(1.5); */
/* } */

.terminal-normal {
  color: var(--terminal-color);
  filter: var(--glow-white) var(--glow-white) brightness(1.5);
}

.terminal-highlight {
  color: var(--reentry-orange);
  filter: var(--glow-highlight) var(--glow-highlight) brightness(1.5);
}

.terminal-line.terminal-input::before {
  content: "$";
  padding: 0 0.5em 0 0;
}

@keyframes cursor-blink {
  0% {
    opacity: 1;
  }

  50% {
    opacity: 0;
  }
}

.terminal-line:last-child::after {
  content: "\2593";
  padding-left: 0.1em;
  animation: 0.6s cursor-blink infinite;
}

.terminal-line:last-of-type:empty::after {
  padding-left: 0;
}
